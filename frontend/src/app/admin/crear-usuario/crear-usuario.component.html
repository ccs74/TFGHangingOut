<section class="mt-2 admin-nav">
    <header class="admin-header">
        <div class="d-flex">
            <img src="../../../assets/imgs/Logo.png" class="logo">
            <h1 class="mt-5">Panel de Control</h1>
        </div>

    </header>
    <!-- Común en la parte de admin -->
    <nav class="admin-nav">
        <div class="float-left mr-1">
            <div class="dropdown">
                <button class="menuBoton" type="button" data-toggle="dropdown">
                <i class="fa-solid fa-bars fa-2x p-1"></i>
              </button>
                <div class="dropdown-menu">
                    <div class="dropdown-option">
                        <button routerLink="/admin/usuarios">Usuarios</button>
                    </div>
                    <div class="dropdown-option">
                        <button routerLink="/admin/actividades">Actividades</button>
                    </div>
                    <div class="dropdown-option">
                        <button routerLink="/admin/categorias">Categorías</button>
                    </div>
                    <div class="dropdown-option">
                        <button routerLink="/admin/incidencias">Incidencias</button>
                    </div>
                    <div class="dropdown-option">
                        <button class="logOutAdmin" (click)="logout()">Cerrar Sesión</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="d-flex admin-nav-title ">
            <div class="ml-2 my-auto">
                <h4 class="title2 mt-2">{{titulo}}</h4>
            </div>
            <div class="d-flex my-auto">
                <i class="fa-solid fa-arrow-rotate-left fa-2x mx-3" routerLink="{{before}}"></i>
            </div>
        </div>
    </nav>
</section>
<div class="resultados">
    <form [formGroup]="registerForm" (ngSubmit)="crearUsuario()">
        <div>
            <label class="tituloForm mt-3" for="nombre">Nombre*</label><br>
            <input type="text" class="inputForm" formControlName="nombre" required>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('nombre')">* El nombre de usuario es obligatorio</p>
        <div>
            <label class="tituloForm" for="apellidos">Apellidos*</label><br>
            <input class="inputForm" type="text" formControlName="apellidos" required>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('apellidos')">* Los apellidos del usuario son obligatorios</p>
        <div>
            <label class="tituloForm" for="email">Email*</label><br>
            <input class="inputForm" type="email" formControlName="email" required>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('email')">* El email es obligatorio y debe ser válido</p>
        <div *ngIf="nuevo">
            <label class="tituloForm" for="password">Contraseña*</label><br>
            <input class="inputForm" type="password" formControlName="password" required>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="nuevo && !campoValido('password')">* La contraseña es obligatoria</p>
        <div>
            <label class="tituloForm" for="fecha_nacimiento">Fecha de Nacimiento*</label><br>
            <div>
                <input class="inputForm" type="date" formControlName="fecha_nacimiento" value="" required>
                <i class="fa-solid fa-calendar-days nacimiento"></i>
            </div>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('fecha_nacimiento')">* La fecha de nacimiento es obligatoria</p>
        <p class="small text-danger font-italic invalid-msg" *ngIf="fechaInvalida">* Debe tener más de 16 años</p>
        <div>
            <label class="tituloForm" for="pais">País*</label>
            <input type="text" class="inputForm" formControlName="pais">
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('pais')">* El pais es obligatorio</p>
        <div>
            <label class="tituloForm" for="poblacion">Población*</label>
            <input type="text" class="inputForm" formControlName="poblacion">
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('poblacion')">* La población es obligatoria</p>
        <div>
            <label class="tituloForm" for="provincia">Provincia*</label><br>
            <select class="inputForm" id="provincia" formControlName="provincia">
              <option value="" disabled selected>Provincia</option>
              <option *ngFor="let provincia of listaProvincias" value={{provincia.uid}}>{{provincia.nombre}}</option>
            </select>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('provincia')">* La provincia es obligatoria</p>
        <div>
            <label class="tituloForm" for="descripcion">Descripción*</label><br>
            <textarea class="inputForm" formControlName="descripcion" minlength="120" required></textarea>
        </div>
        <p class="small text-danger font-italic invalid-msg" *ngIf="!campoValido('descripcion')">* La descripción es obligatoria y debe tener al menos 120 caracteres</p>
        <div>
            <label class="fotoPerfil fpAdmin text-center" for="fotoPerfil">Foto de Perfil
          <div class="marcoFPerfil4">
            <img [src]="fotoPerfilURL" alt="" class='imgRedonda'>
          </div>
        </label>
        </div>
        <div class="divInputFile mx-4">
            <input id="inputFile" type="file" accept='image/*' (change)="onFileSelect($event)">
        </div>
        <button *ngIf="nuevo" class="big-button my-5" type="submit"><i class="fa fa-spinner fa-spin mr-2"*ngIf="waiting"></i>Crear Usuario</button>
        <button *ngIf="!nuevo" class="big-button my-5" type="submit"><i class="fa fa-spinner fa-spin mr-2"*ngIf="waiting"></i>Editar Usuario</button>
    </form>
</div>
