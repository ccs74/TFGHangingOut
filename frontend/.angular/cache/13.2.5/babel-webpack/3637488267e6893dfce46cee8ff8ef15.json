{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/actividades.service\";\nimport * as i2 from \"src/app/services/usuario.service\";\nimport * as i3 from \"src/app/services/categorias.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\n\nfunction ResultadosActividadesComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 23);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_16_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_16_div_13_Template_button_click_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const categoria_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onCheckboxChange($event, categoria_r7.uid);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const categoria_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(categoria_r7.clase);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(categoria_r7.nombre);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_16_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_16_div_20_Template_button_click_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const dia_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.oncheckChanged($event, dia_r10.uid);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const dia_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(dia_r10.clase);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(dia_r10.nombre);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"form\", 25);\n    i0.ɵɵlistener(\"ngSubmit\", function ResultadosActividadesComponent_div_16_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.buscarActividades();\n    });\n    i0.ɵɵelementStart(2, \"div\")(3, \"h1\");\n    i0.ɵɵtext(4, \"\\u00BFD\\u00F3nde quieres hacer las actividades?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵelement(6, \"input\", 26)(7, \"i\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"div\", 28);\n    i0.ɵɵelementStart(9, \"div\")(10, \"h1\");\n    i0.ɵɵtext(11, \"\\u00BFQu\\u00E9 te apetece?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 29);\n    i0.ɵɵtemplate(13, ResultadosActividadesComponent_div_16_div_13_Template, 3, 4, \"div\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(14, \"div\", 28);\n    i0.ɵɵelementStart(15, \"div\")(16, \"h1\");\n    i0.ɵɵtext(17, \"\\u00BFCu\\u00E1ndo?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"label\", 31);\n    i0.ɵɵelementStart(19, \"div\", 32);\n    i0.ɵɵtemplate(20, ResultadosActividadesComponent_div_16_div_20_Template, 3, 4, \"div\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 3);\n    i0.ɵɵelement(22, \"input\", 34)(23, \"i\", 35);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(24, \"div\", 28);\n    i0.ɵɵelementStart(25, \"div\")(26, \"h1\");\n    i0.ɵɵtext(27, \"Precio (\\u20AC)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"label\", 36);\n    i0.ɵɵelementStart(29, \"div\", 37)(30, \"div\", 3)(31, \"span\");\n    i0.ɵɵtext(32, \"M\\u00EDn: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(33, \"input\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 39)(35, \"span\");\n    i0.ɵɵtext(36, \"M\\u00E1x: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"input\", 40);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(38, \"div\", 28);\n    i0.ɵɵelementStart(39, \"div\")(40, \"div\", 3)(41, \"label\", 41)(42, \"input\", 42);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_16_Template_input_click_42_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.checkPopularidad($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"span\");\n    i0.ɵɵtext(44, \"Ordenar por popularidad\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(45, \"button\", 43);\n    i0.ɵɵtext(46, \"Buscar\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.filtrosForm);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.listaCategorias);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.listaFecha);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"h1\");\n    i0.ɵɵtext(2, \"Resultados\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"h3\", 51);\n    i0.ɵɵtext(2, \"Lo sentimos, ninguna actividad coincide con tu b\\u00FAsqueda\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_div_20_i_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"i\", 76);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_18_div_2_div_20_i_2_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const actividad_r18 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return ctx_r26.marcarFavorito(actividad_r18.uid, true);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_div_20_i_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"i\", 77);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_18_div_2_div_20_i_3_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const actividad_r18 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return ctx_r29.marcarFavorito(actividad_r18.uid, false);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_div_20_i_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"i\", 78);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_18_div_2_div_20_i_4_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const actividad_r18 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return ctx_r32.marcarAsistencia(actividad_r18.uid, false);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_div_20_i_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"i\", 79);\n    i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_div_18_div_2_div_20_i_5_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const actividad_r18 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return ctx_r35.marcarAsistencia(actividad_r18.uid, true);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 70)(1, \"div\", 71);\n    i0.ɵɵtemplate(2, ResultadosActividadesComponent_div_18_div_2_div_20_i_2_Template, 1, 0, \"i\", 72);\n    i0.ɵɵtemplate(3, ResultadosActividadesComponent_div_18_div_2_div_20_i_3_Template, 1, 0, \"i\", 73);\n    i0.ɵɵtemplate(4, ResultadosActividadesComponent_div_18_div_2_div_20_i_4_Template, 1, 0, \"i\", 74);\n    i0.ɵɵtemplate(5, ResultadosActividadesComponent_div_18_div_2_div_20_i_5_Template, 1, 0, \"i\", 75);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const actividad_r18 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !actividad_r18.favorito);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", actividad_r18.favorito);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", actividad_r18.asistir);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !actividad_r18.asistir && !actividad_r18.completa);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_p_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const actividad_r18 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"(M\\u00EDn: \", actividad_r18.min_participantes, \" - M\\u00E1x: \", actividad_r18.max_participantes, \")\");\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_div_2_p_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 80);\n    i0.ɵɵtext(1, \"Completa\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/actividades/ver-actividad/\", a1];\n};\n\nconst _c1 = function (a1) {\n  return [\"/chats/\", a1];\n};\n\nfunction ResultadosActividadesComponent_div_18_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53)(2, \"h5\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 54)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"i\", 55);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 56)(9, \"div\", 57);\n    i0.ɵɵelement(10, \"img\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 59)(12, \"h3\", 60);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"h4\", 61);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"h5\", 62)(17, \"strong\");\n    i0.ɵɵtext(18, \"Requisitos: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, ResultadosActividadesComponent_div_18_div_2_div_20_Template, 6, 4, \"div\", 63);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"p\", 64);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 65)(24, \"h3\", 66)(25, \"strong\");\n    i0.ɵɵtext(26, \"Precio: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 67)(29, \"h3\");\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(31, ResultadosActividadesComponent_div_18_div_2_p_31_Template, 2, 2, \"p\", 68);\n    i0.ɵɵtemplate(32, ResultadosActividadesComponent_div_18_div_2_p_32_Template, 2, 0, \"p\", 69);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const actividad_r18 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r18.fecha2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r18.poblacion);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c0, actividad_r18.uid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../../assets/imgs/actividades/\", actividad_r18.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(17, _c0, actividad_r18.uid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(actividad_r18.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(actividad_r18.descripcion);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", actividad_r18.requisitos, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", actividad_r18.fechaValida);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(19, _c1, actividad_r18.uid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(actividad_r18.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", actividad_r18.precio, \"\\u20AC\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", actividad_r18.num_participantes, \" Participantes \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !actividad_r18.completa);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", actividad_r18.completa);\n  }\n}\n\nfunction ResultadosActividadesComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 47);\n    i0.ɵɵtemplate(1, ResultadosActividadesComponent_div_18_div_1_Template, 3, 0, \"div\", 48);\n    i0.ɵɵtemplate(2, ResultadosActividadesComponent_div_18_div_2_Template, 33, 21, \"div\", 49);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.listaVacia);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.listaActividades);\n  }\n}\n\nexport let ResultadosActividadesComponent = /*#__PURE__*/(() => {\n  class ResultadosActividadesComponent {\n    constructor(actividadService, usuarioService, categoriaService, fb) {\n      this.actividadService = actividadService;\n      this.usuarioService = usuarioService;\n      this.categoriaService = categoriaService;\n      this.fb = fb;\n      this.listaActividades = [];\n      this.favoritas = [];\n      this.asistidas = [];\n      this.bloqueados = [];\n      this.listaCategorias = [];\n      this.listaFecha = [{\n        nombre: \"Hoy\",\n        clase: \"categoria\",\n        uid: 1,\n        marcado: false\n      }, {\n        nombre: \"Mañana\",\n        clase: \"categoria\",\n        uid: 2,\n        marcado: false\n      }, {\n        nombre: \"Fin de Semana\",\n        clase: \"categoria\",\n        uid: 3,\n        marcado: false\n      }];\n      this.listaVacia = false;\n      this.filtrosForm = this.fb.group({\n        texto: [''],\n        lugar: [''],\n        intereses: [''],\n        fecha: [''],\n        min: [''],\n        max: [''],\n        popularidad: ['']\n      });\n      this.mostrarFiltros = false;\n    }\n\n    ngOnInit() {\n      var _a;\n\n      this.cargarUsuario();\n      this.buscarActividades();\n      this.cargarCategorias();\n      (_a = this.filtrosForm.get('popularidad')) === null || _a === void 0 ? void 0 : _a.setValue(false);\n    }\n\n    cambiarPag() {\n      localStorage.setItem('before', `/resultados-actividades`);\n    }\n\n    cargarUsuario() {\n      let usuario = localStorage.getItem('email');\n\n      if (!usuario) {\n        return;\n      }\n\n      this.usuarioService.cargarUsuario(\"\", usuario).subscribe(res => {\n        console.log(res);\n        this.favoritas = res['existeUsuario'].actividades_favoritas;\n        this.asistidas = res['existeUsuario'].actividades_asistidas;\n        this.idUsuario = res['existeUsuario'].uid;\n        this.bloqueados = res['existeUsuario'].bloqueados;\n      }, err => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'No se pudo completar la acción, vuelva a intentarlo'\n        });\n      });\n    }\n\n    actualizarActividades() {\n      for (let i = 0; i < this.listaActividades.length; i++) {\n        this.listaActividades[i].foto = this.listaActividades[i].fotos[0];\n        this.listaActividades[i].fechaValida = this.validarFecha(this.listaActividades[i].fecha);\n        this.listaActividades[i].fecha2 = this.convertirFecha(this.listaActividades[i].fecha);\n        this.listaActividades[i].favorito = false;\n        this.listaActividades[i].asistir = false;\n\n        if (this.listaActividades[i].requisitos.length > 75) {\n          this.listaActividades[i].requisitos = this.listaActividades[i].requisitos.substring(0, 74) + \"...\";\n        }\n\n        if (this.listaActividades[i].poblacion.length > 30) {\n          this.listaActividades[i].poblacion = this.listaActividades[i].poblacion.substring(0, 29) + \"...\";\n        }\n\n        if (this.listaActividades[i].titulo.length > 22) {\n          this.listaActividades[i].titulo = this.listaActividades[i].titulo.substring(0, 21) + \"...\";\n        }\n\n        if (this.listaActividades[i].descripcion.length > 120) {\n          this.listaActividades[i].descripcion = this.listaActividades[i].descripcion.substring(0, 119) + \"...\";\n        }\n\n        if (this.listaActividades[i].organizador == this.idUsuario) {\n          this.listaActividades[i].esCreador = true;\n        } else {\n          this.listaActividades[i].esCreador = false;\n        }\n      }\n\n      for (let i = 0; i < this.listaActividades.length; i++) {\n        for (let j = 0; j < this.favoritas.length; j++) {\n          if (this.listaActividades[i].uid == this.favoritas[j]) {\n            this.listaActividades[i].favorito = true;\n          }\n        }\n\n        for (let j = 0; j < this.asistidas.length; j++) {\n          if (this.listaActividades[i].uid == this.asistidas[j]) {\n            this.listaActividades[i].asistir = true;\n          }\n        }\n\n        if (this.listaActividades[i].num_participantes == this.listaActividades[i].max_participantes) {\n          this.listaActividades[i].completa = true;\n        } else {\n          this.listaActividades[i].completa = false;\n        }\n      }\n    }\n\n    buscarActividades() {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n\n      console.log(this.filtrosForm.value);\n      let texto, lugar, intereses, min, max, fecha, popularidad;\n\n      if ((_a = this.filtrosForm.get('texto')) === null || _a === void 0 ? void 0 : _a.value) {\n        texto = (_b = this.filtrosForm.get('texto')) === null || _b === void 0 ? void 0 : _b.value;\n      } else {\n        texto = \"\";\n      }\n\n      if ((_c = this.filtrosForm.get('lugar')) === null || _c === void 0 ? void 0 : _c.value) {\n        lugar = (_d = this.filtrosForm.get('lugar')) === null || _d === void 0 ? void 0 : _d.value;\n      } else {\n        lugar = \"\";\n      }\n\n      if ((_e = this.filtrosForm.get('intereses')) === null || _e === void 0 ? void 0 : _e.value) {\n        intereses = (_f = this.filtrosForm.get('intereses')) === null || _f === void 0 ? void 0 : _f.value;\n      } else {\n        intereses = [];\n      }\n\n      if ((_g = this.filtrosForm.get('min')) === null || _g === void 0 ? void 0 : _g.value) {\n        min = (_h = this.filtrosForm.get('min')) === null || _h === void 0 ? void 0 : _h.value;\n      } else {\n        min = \"\";\n      }\n\n      if ((_j = this.filtrosForm.get('max')) === null || _j === void 0 ? void 0 : _j.value) {\n        max = (_k = this.filtrosForm.get('max')) === null || _k === void 0 ? void 0 : _k.value;\n      } else {\n        max = \"\";\n      }\n\n      let domingo;\n\n      if ((_l = this.filtrosForm.get('fecha')) === null || _l === void 0 ? void 0 : _l.value) {\n        if (((_m = this.filtrosForm.get('fecha')) === null || _m === void 0 ? void 0 : _m.value) == \"finde\") {\n          let viernes = new Date();\n\n          while (viernes.getDay() !== 4) {\n            viernes = new Date(viernes.getDate() + 1);\n          }\n\n          domingo = new Date(viernes);\n          domingo.setDate(domingo.getDate() + 2);\n          fecha = viernes;\n        } else {\n          fecha = (_o = this.filtrosForm.get('fecha')) === null || _o === void 0 ? void 0 : _o.value;\n        }\n      } else {\n        fecha = \"\";\n      }\n\n      popularidad = (_p = this.filtrosForm.get('popularidad')) === null || _p === void 0 ? void 0 : _p.value;\n      this.actividadService.cargarActividades(texto, lugar, intereses, min, max, fecha, popularidad, domingo).subscribe(res => {\n        this.mostrarFiltros = false;\n        let actividades = res['actividades'];\n        this.listaActividades = [];\n\n        for (let i = 0; i < actividades.length; i++) {\n          let add = true;\n\n          for (let j = 0; j < this.bloqueados.length; j++) {\n            if (actividades[i].organizador == this.bloqueados[j]) {\n              add = false;\n            }\n          }\n\n          if (add) {\n            this.listaActividades.push(actividades[i]);\n          }\n        }\n\n        if (this.listaActividades.length == 0) {\n          this.listaVacia = true;\n        } else {\n          this.listaVacia = false;\n        }\n\n        this.actualizarActividades();\n        console.log(res);\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    cargarCategorias() {\n      this.categoriaService.cargarCategorias().subscribe(res => {\n        this.listaCategorias = res['categorias'];\n\n        for (let i = 0; i < this.listaCategorias.length; i++) {\n          this.listaCategorias[i].marcado = false;\n          this.listaCategorias[i].clase = \"categoria\";\n        }\n      }, err => {\n        const msgerror = err.error.msg || 'No se pudo completar la acción, vuelva a intentarlo';\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: msgerror\n        });\n        console.log(err);\n      });\n    }\n\n    marcarFavorito(idActividad, fav) {\n      this.actividadService.marcarFavorito(this.idUsuario, idActividad, fav).subscribe(res => {\n        console.log(res);\n        this.favoritas = res['existeUsuario'].actividades_favoritas;\n        this.actualizarActividades();\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    marcarAsistencia(idActividad, asis) {\n      this.actividadService.marcarAsistencia(this.idUsuario, idActividad, asis).subscribe(res => {\n        console.log(res);\n        this.asistidas = res['existeUsuario'].actividades_asistidas;\n        this.actualizarActividades();\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    updateTexto(texto) {\n      var _a;\n\n      (_a = this.filtrosForm.get('texto')) === null || _a === void 0 ? void 0 : _a.setValue(texto);\n\n      if (this.mostrarFiltros == false) {\n        this.buscarActividades();\n      }\n    }\n\n    oncheckChanged(e, id) {\n      var _a;\n\n      for (let i = 0; i < this.listaFecha.length; i++) {\n        if (this.listaFecha[i].uid === id) {\n          if (!this.listaFecha[i].marcado) {\n            this.listaFecha[i].marcado = true;\n            this.listaFecha[i].clase = \"categoria-fecha\";\n          }\n        } else {\n          this.listaFecha[i].marcado = false;\n          this.listaFecha[i].clase = \"categoria\";\n        }\n      }\n\n      let fecha;\n\n      switch (id) {\n        case 1:\n          fecha = new Date();\n          break;\n\n        case 2:\n          fecha = new Date();\n          fecha.setDate(fecha.getDate() + 1);\n          break;\n\n        case 3:\n          fecha = \"finde\";\n          break;\n      }\n\n      (_a = this.filtrosForm.get('fecha')) === null || _a === void 0 ? void 0 : _a.setValue(fecha);\n    }\n\n    checkPopularidad(e) {\n      var _a, _b, _c;\n\n      if (((_a = this.filtrosForm.get('popularidad')) === null || _a === void 0 ? void 0 : _a.value) == false) {\n        (_b = this.filtrosForm.get('popularidad')) === null || _b === void 0 ? void 0 : _b.setValue(true);\n      } else {\n        (_c = this.filtrosForm.get('popularidad')) === null || _c === void 0 ? void 0 : _c.setValue(false);\n      }\n    }\n\n    onCheckboxChange(e, uid) {\n      var _a;\n\n      for (let i = 0; i < this.listaCategorias.length; i++) {\n        if (this.listaCategorias[i].uid === uid) {\n          if (!this.listaCategorias[i].marcado) {\n            this.listaCategorias[i].marcado = true;\n            this.listaCategorias[i].clase = \"categoria-selected\";\n          } else {\n            this.listaCategorias[i].marcado = false;\n            this.listaCategorias[i].clase = \"categoria\";\n          }\n        }\n      }\n\n      let intereses = [];\n\n      for (let i = 0; i < this.listaCategorias.length; i++) {\n        if (this.listaCategorias[i].marcado == true) {\n          intereses.push(this.listaCategorias[i].uid);\n        }\n      }\n\n      (_a = this.filtrosForm.get('intereses')) === null || _a === void 0 ? void 0 : _a.setValue(intereses);\n    }\n\n    activarFiltros() {\n      if (this.mostrarFiltros == false) {\n        this.mostrarFiltros = true;\n      } else {\n        this.mostrarFiltros = false;\n      }\n    }\n\n    validarFecha(fecha) {\n      let valida = true;\n      let hoy = new Date();\n      let f = new Date(fecha);\n\n      if (f.getFullYear() < hoy.getFullYear()) {\n        valida = false;\n      } else if (f.getFullYear() == hoy.getFullYear()) {\n        if (f.getMonth() < hoy.getMonth()) {\n          valida = false;\n        } else if (f.getMonth() == hoy.getMonth()) {\n          if (f.getDate() < hoy.getDate()) {\n            valida = false;\n          } else if (f.getDate() == hoy.getDate()) {\n            if (f.getHours() < hoy.getHours()) {\n              valida = false;\n            } else if (f.getHours() == hoy.getHours()) {\n              if (f.getMinutes() <= hoy.getMinutes()) {\n                valida = false;\n              }\n            }\n          }\n        }\n      }\n\n      return valida;\n    }\n\n    convertirFecha(date) {\n      let cadena = \"\";\n      let fecha = new Date(date);\n      let dia,\n          num,\n          mes,\n          hora,\n          min = \"\";\n\n      switch (fecha.getDay()) {\n        case 1:\n          dia = \"Lun\";\n          break;\n\n        case 2:\n          dia = \"Mar\";\n          break;\n\n        case 3:\n          dia = \"Mié\";\n          break;\n\n        case 4:\n          dia = \"Jue\";\n          break;\n\n        case 5:\n          dia = \"Vie\";\n          break;\n\n        case 6:\n          dia = \"Sáb\";\n          break;\n\n        case 0:\n          dia = \"Dom\";\n          break;\n      }\n\n      num = fecha.getDate().toString();\n\n      switch (fecha.getMonth()) {\n        case 0:\n          mes = \"Ene\";\n          break;\n\n        case 1:\n          mes = \"Feb\";\n          break;\n\n        case 2:\n          mes = \"Mar\";\n          break;\n\n        case 3:\n          mes = \"Abr\";\n          break;\n\n        case 4:\n          mes = \"May\";\n          break;\n\n        case 5:\n          mes = \"Jun\";\n          break;\n\n        case 6:\n          mes = \"Jul\";\n          break;\n\n        case 7:\n          mes = \"Ago\";\n          break;\n\n        case 8:\n          mes = \"Sep\";\n          break;\n\n        case 9:\n          mes = \"Oct\";\n          break;\n\n        case 10:\n          mes = \"Nov\";\n          break;\n\n        case 11:\n          mes = \"Dic\";\n          break;\n      }\n\n      let sh = fecha.getHours();\n\n      if (sh < 10) {\n        hora = \"0\" + sh.toString();\n      } else {\n        hora = sh.toString();\n      }\n\n      let sm = fecha.getMinutes();\n\n      if (sm < 10) {\n        min = \"0\" + sm.toString();\n      } else {\n        min = sm.toString();\n      }\n\n      cadena = dia + \", \" + num + \" \" + mes + \" · \" + hora + \":\" + min;\n      return cadena;\n    }\n\n  }\n\n  ResultadosActividadesComponent.ɵfac = function ResultadosActividadesComponent_Factory(t) {\n    return new (t || ResultadosActividadesComponent)(i0.ɵɵdirectiveInject(i1.ActividadesService), i0.ɵɵdirectiveInject(i2.UsuarioService), i0.ɵɵdirectiveInject(i3.CategoriasService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n  };\n\n  ResultadosActividadesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ResultadosActividadesComponent,\n    selectors: [[\"app-resultados-actividades\"]],\n    decls: 32,\n    vars: 4,\n    consts: [[\"id\", \"admin-back\"], [1, \"admin-header\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"d-flex\"], [\"src\", \"../../../assets/imgs/Logo.png\", 1, \"logo\"], [\"routerLink\", \"/editar-perfil\", 1, \"fa-solid\", \"fa-user\", \"fa-3x\", 3, \"click\"], [1, \"buscador\", \"d-flex\"], [1, \"fa-solid\", \"fa-filter\", \"fa-2x\", 3, \"click\"], [1, \"mt-4\"], [\"for\", \"textoBusqueda\"], [\"type\", \"text\", \"id\", \"textoBusqueda\", \"placeholder\", \"Buscar...\", 3, \"keyup\"], [\"textoBuscar\", \"\"], [1, \"fa-solid\", \"fa-magnifying-glass\", \"fa-2x\", \"iconoBuscador\"], [\"class\", \"separacion3\", 4, \"ngIf\"], [\"class\", \"filtros\", 4, \"ngIf\"], [\"class\", \"text-center listaResultados\", 4, \"ngIf\"], [\"class\", \"resultados2\", 4, \"ngIf\"], [1, \"navBarCliente\", \"d-flex\"], [\"routerLink\", \"/usuarios\", 1, \"fa-solid\", \"fa-user-group\", \"fa-3x\"], [\"routerLink\", \"/actividades/organizadas\", 1, \"fa-solid\", \"fa-rectangle-list\", \"fa-3x\"], [1, \"clicked\"], [\"routerLink\", \"/resultados-actividades\", 1, \"fa-solid\", \"fa-magnifying-glass\", \"fa-3x\"], [\"routerLink\", \"/chats\", 1, \"fa-solid\", \"fa-comments\", \"fa-3x\"], [1, \"separacion3\"], [1, \"filtros\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"id\", \"lugar\", \"formControlName\", \"lugar\", \"placeholder\", \"Poblaci\\u00F3n...\"], [1, \"fa-solid\", \"fa-location-dot\", \"fa-2x\"], [1, \"separacion4\"], [1, \"d-flex\", \"flex-row\", \"flex-wrap\", \"intereses\"], [4, \"ngFor\", \"ngForOf\"], [\"for\", \"fecha\"], [1, \"d-flex\", \"mb-4\"], [\"class\", \"containerFecha\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"date\", \"name\", \"fecha\", \"formControlName\", \"fecha\", \"id\", \"fecha\"], [1, \"fa-solid\", \"fa-calendar-days\", \"fa-2x\", \"ml-3\", \"mt-1\", 2, \"color\", \"#85C8FF\"], [\"for\", \"precio\"], [1, \"d-flex\", \"precios\"], [\"type\", \"number\", \"id\", \"precio\", \"formControlName\", \"min\"], [1, \"d-flex\", \"ml-4\"], [\"type\", \"number\", \"id\", \"precio\", \"formControlName\", \"max\"], [\"for\", \"popularidad\", 1, \"checkpopularidad\"], [\"type\", \"checkbox\", \"id\", \"popularidad\", \"name\", \"popularidad\", 3, \"click\"], [\"type\", \"submit\", 1, \"px-5\", \"form-button\"], [\"type\", \"button\", 3, \"click\"], [1, \"containerFecha\"], [1, \"text-center\", \"listaResultados\"], [1, \"resultados2\"], [\"class\", \"cardActividad text-center\", 4, \"ngIf\"], [\"class\", \"cardActividad\", 4, \"ngFor\", \"ngForOf\"], [1, \"cardActividad\", \"text-center\"], [1, \"mx-4\", 2, \"font-size\", \"1em\", \"color\", \"#737373\"], [1, \"cardActividad\"], [1, \"infoActivity\", \"d-flex\"], [1, \"location\", \"d-flex\"], [1, \"fa-solid\", \"fa-location-dot\"], [1, \"activity-content\", \"d-flex\"], [1, \"marcoFActividad\", 3, \"routerLink\"], [1, \"fActividad\", 3, \"src\"], [1, \"ml-4\", \"mr-6\", \"descActivity\"], [3, \"routerLink\"], [1, \"desc\"], [1, \"requisitos\"], [\"class\", \"d-flex justify-content-end mr-2\", 4, \"ngIf\"], [1, \"infoEmail\", 3, \"routerLink\"], [1, \"d-flex\", \"activityFooter\"], [1, \"precio\"], [1, \"participantes\", \"d-flex\"], [4, \"ngIf\"], [\"class\", \"actividadCompleta\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-end\", \"mr-2\"], [1, \"botones-actividad\", \"d-flex\"], [\"class\", \"fa-regular fa-heart meGusta\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"fa-solid fa-heart meGusta\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"fa-solid fa-circle-check asistir\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"fa-regular fa-circle-check asistir\", 3, \"click\", 4, \"ngIf\"], [1, \"fa-regular\", \"fa-heart\", \"meGusta\", 3, \"click\"], [1, \"fa-solid\", \"fa-heart\", \"meGusta\", 3, \"click\"], [1, \"fa-solid\", \"fa-circle-check\", \"asistir\", 3, \"click\"], [1, \"fa-regular\", \"fa-circle-check\", \"asistir\", 3, \"click\"], [1, \"actividadCompleta\"]],\n    template: function ResultadosActividadesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r40 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementStart(5, \"h1\");\n        i0.ɵɵtext(6, \"Explorar\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"i\", 5);\n        i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_Template_i_click_7_listener() {\n          return ctx.cambiarPag();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"i\", 7);\n        i0.ɵɵlistener(\"click\", function ResultadosActividadesComponent_Template_i_click_9_listener() {\n          return ctx.activarFiltros();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 8);\n        i0.ɵɵelement(11, \"label\", 9);\n        i0.ɵɵelementStart(12, \"input\", 10, 11);\n        i0.ɵɵlistener(\"keyup\", function ResultadosActividadesComponent_Template_input_keyup_12_listener() {\n          i0.ɵɵrestoreView(_r40);\n\n          const _r0 = i0.ɵɵreference(13);\n\n          return ctx.updateTexto(_r0.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"i\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(15, ResultadosActividadesComponent_div_15_Template, 1, 0, \"div\", 13);\n        i0.ɵɵtemplate(16, ResultadosActividadesComponent_div_16_Template, 47, 3, \"div\", 14);\n        i0.ɵɵtemplate(17, ResultadosActividadesComponent_div_17_Template, 3, 0, \"div\", 15);\n        i0.ɵɵtemplate(18, ResultadosActividadesComponent_div_18_Template, 3, 2, \"div\", 16);\n        i0.ɵɵelementStart(19, \"div\", 17)(20, \"div\")(21, \"button\");\n        i0.ɵɵelement(22, \"i\", 18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\")(24, \"button\");\n        i0.ɵɵelement(25, \"i\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 20)(27, \"button\");\n        i0.ɵɵelement(28, \"i\", 21);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\")(30, \"button\");\n        i0.ɵɵelement(31, \"i\", 22);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarFiltros);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarFiltros);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.mostrarFiltros);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.mostrarFiltros);\n      }\n    },\n    directives: [i5.RouterLink, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i6.NgIf, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i6.NgForOf, i4.NumberValueAccessor],\n    styles: [\"\"]\n  });\n  return ResultadosActividadesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}