{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/actividades.service\";\nimport * as i3 from \"src/app/services/usuario.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\n\nfunction ActividadesComponent_form_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 26)(1, \"input\", 27, 28);\n    i0.ɵɵlistener(\"keyup\", function ActividadesComponent_form_35_Template_input_keyup_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n\n      const _r2 = i0.ɵɵreference(2);\n\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.cargarActividades(_r2.value);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"i\", 29);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/admin/actividades/ver-actividad/\", a1];\n};\n\nconst _c1 = function (a1) {\n  return [\"/admin/actividades/editar-actividad\", a1];\n};\n\nfunction ActividadesComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"h5\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 32)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"i\", 33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 34)(9, \"div\", 35);\n    i0.ɵɵelement(10, \"img\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 37)(12, \"h3\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"h4\", 38);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"h5\", 39)(17, \"strong\");\n    i0.ɵɵtext(18, \"Requisitos: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 2)(21, \"div\")(22, \"div\", 40);\n    i0.ɵɵelement(23, \"i\", 41)(24, \"i\", 41)(25, \"i\", 41)(26, \"i\", 41)(27, \"i\", 41);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 42);\n    i0.ɵɵelement(29, \"i\", 43);\n    i0.ɵɵelementStart(30, \"i\", 44);\n    i0.ɵɵlistener(\"click\", function ActividadesComponent_div_36_Template_i_click_30_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const actividad_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.borrarActividad(actividad_r5.uid, actividad_r5.titulo);\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(31, \"p\", 45);\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\", 46)(34, \"h3\", 47)(35, \"strong\");\n    i0.ɵɵtext(36, \"Precio: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"div\", 48)(39, \"h3\");\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"p\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const actividad_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, actividad_r5.uid));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r5.fecha2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r5.poblacion);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../../assets/imgs/actividades/\", actividad_r5.foto, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r5.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(actividad_r5.descripcion);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", actividad_r5.requisitos, \"\");\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c1, actividad_r5.uid));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(actividad_r5.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", actividad_r5.precio, \"\\u20AC\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", actividad_r5.num_participantes, \" Participantes \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"(M\\u00EDn: \", actividad_r5.min_participantes, \" - M\\u00E1x: \", actividad_r5.max_participantes, \") \");\n  }\n}\n\nexport let ActividadesComponent = /*#__PURE__*/(() => {\n  class ActividadesComponent {\n    constructor(fb, actividadService, usuarioService) {\n      this.fb = fb;\n      this.actividadService = actividadService;\n      this.usuarioService = usuarioService;\n      this.listaActividades = [];\n      this.mostrarBuscador = false;\n      this.listaFotos = [];\n    }\n\n    ngOnInit() {\n      this.cargarActividades(\"\");\n    }\n\n    convertirFecha(date) {\n      let cadena = \"\";\n      let fecha = new Date(date);\n      let dia,\n          num,\n          mes,\n          hora,\n          min = \"\";\n\n      switch (fecha.getDay()) {\n        case 1:\n          dia = \"Lun\";\n          break;\n\n        case 2:\n          dia = \"Mar\";\n          break;\n\n        case 3:\n          dia = \"Mié\";\n          break;\n\n        case 4:\n          dia = \"Jue\";\n          break;\n\n        case 5:\n          dia = \"Vie\";\n          break;\n\n        case 6:\n          dia = \"Sáb\";\n          break;\n\n        case 0:\n          dia = \"Dom\";\n          break;\n      }\n\n      num = fecha.getDate().toString();\n\n      switch (fecha.getMonth()) {\n        case 0:\n          mes = \"Ene\";\n          break;\n\n        case 1:\n          mes = \"Feb\";\n          break;\n\n        case 2:\n          mes = \"Mar\";\n          break;\n\n        case 3:\n          mes = \"Abr\";\n          break;\n\n        case 4:\n          mes = \"May\";\n          break;\n\n        case 5:\n          mes = \"Jun\";\n          break;\n\n        case 6:\n          mes = \"Jul\";\n          break;\n\n        case 7:\n          mes = \"Ago\";\n          break;\n\n        case 8:\n          mes = \"Sep\";\n          break;\n\n        case 9:\n          mes = \"Oct\";\n          break;\n\n        case 10:\n          mes = \"Nov\";\n          break;\n\n        case 11:\n          mes = \"Dic\";\n          break;\n      }\n\n      let sh = fecha.getHours();\n\n      if (sh < 10) {\n        hora = \"0\" + sh.toString();\n      } else {\n        hora = sh.toString();\n      }\n\n      let sm = fecha.getMinutes();\n\n      if (sm < 10) {\n        min = \"0\" + sm.toString();\n      } else {\n        min = sm.toString();\n      }\n\n      cadena = dia + \", \" + num + \" \" + mes + \" · \" + hora + \":\" + min;\n      return cadena;\n    }\n\n    cargarActividades(textoBuscar) {\n      this.actividadService.cargarActividades(textoBuscar).subscribe(res => {\n        this.listaActividades = res['actividades'];\n\n        for (let i = 0; i < this.listaActividades.length; i++) {\n          this.listaActividades[i].foto = this.listaActividades[i].fotos[0];\n          this.listaActividades[i].fecha2 = this.convertirFecha(this.listaActividades[i].fecha);\n\n          if (this.listaActividades[i].requisitos.length > 75) {\n            this.listaActividades[i].requisitos = this.listaActividades[i].requisitos.substring(0, 74) + \"...\";\n          }\n\n          if (this.listaActividades[i].poblacion.length > 30) {\n            this.listaActividades[i].poblacion = this.listaActividades[i].poblacion.substring(0, 29) + \"...\";\n          }\n\n          if (this.listaActividades[i].titulo.length > 22) {\n            this.listaActividades[i].titulo = this.listaActividades[i].titulo.substring(0, 21) + \"...\";\n          }\n\n          if (this.listaActividades[i].descripcion.length > 120) {\n            this.listaActividades[i].descripcion = this.listaActividades[i].descripcion.substring(0, 119) + \"...\";\n          }\n        }\n\n        console.log(this.listaActividades);\n      }, err => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'No se pudo completar la acción, vuelva a intentarlo'\n        });\n      });\n    }\n\n    activarBuscador() {\n      this.mostrarBuscador = true;\n    }\n\n    borrarActividad(uid, nombre) {\n      Swal.fire({\n        title: 'Eliminar Actividad',\n        text: `Al eliminar la actividad ${nombre} se perderán todos los datos asociados, ¿Desea continuar?`,\n        icon: 'question',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Sí, borrar',\n        cancelButtonText: \"Cancelar\"\n      }).then(result => {\n        if (result.value) {\n          this.actividadService.borrarActividad(uid).subscribe(resp => {\n            this.cargarActividades(\"\");\n          }, err => {\n            Swal.fire({\n              icon: 'error',\n              title: 'Oops...',\n              text: 'No se pudo completar la acción, vuelta a intentarlo'\n            });\n          });\n        }\n      });\n    }\n\n    logout() {\n      this.usuarioService.logout();\n    }\n\n  }\n\n  ActividadesComponent.ɵfac = function ActividadesComponent_Factory(t) {\n    return new (t || ActividadesComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActividadesService), i0.ɵɵdirectiveInject(i3.UsuarioService));\n  };\n\n  ActividadesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ActividadesComponent,\n    selectors: [[\"app-actividades\"]],\n    decls: 37,\n    vars: 2,\n    consts: [[\"id\", \"admin-back\"], [1, \"admin-header\"], [1, \"d-flex\"], [\"src\", \"../../../assets/imgs/Logo.png\", 1, \"logo\"], [1, \"tituloControl\"], [1, \"admin-nav\"], [1, \"float-left\", \"mr-1\"], [1, \"dropdown\"], [\"type\", \"button\", \"data-toggle\", \"dropdown\", 1, \"menuBoton\"], [1, \"fa-solid\", \"fa-bars\", \"fa-2x\", \"p-1\"], [1, \"dropdown-menu\"], [1, \"dropdown-option\"], [\"routerLink\", \"/admin/usuarios\"], [\"routerLink\", \"/admin/actividades\"], [\"routerLink\", \"/admin/categorias\"], [\"routerLink\", \"/admin/incidencias\"], [1, \"logOutAdmin\", 3, \"click\"], [1, \"d-flex\", \"admin-nav-title\"], [1, \"ml-2\", \"my-auto\"], [1, \"title2\", \"mt-2\"], [1, \"d-flex\", \"my-auto\"], [1, \"fa-solid\", \"fa-magnifying-glass\", \"fa-2x\", 3, \"click\"], [\"routerLink\", \"/admin/actividades/crear-actividad\", 1, \"fa-solid\", \"fa-plus\", \"fa-2x\", \"mx-3\"], [1, \"resultados\"], [\"class\", \"buscadorAdmin d-flex\", 4, \"ngIf\"], [\"class\", \"cardActividad\", 3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"buscadorAdmin\", \"d-flex\"], [\"type\", \"text\", \"placeholder\", \"Buscar...\", 1, \"form-control\", 3, \"keyup\"], [\"txtBuscar\", \"\"], [1, \"fa-solid\", \"fa-magnifying-glass\"], [1, \"cardActividad\", 3, \"routerLink\"], [1, \"infoActivity\", \"d-flex\"], [1, \"location\", \"d-flex\"], [1, \"fa-solid\", \"fa-location-dot\"], [1, \"activity-content\", \"d-flex\"], [1, \"marcoFActividad\"], [1, \"fActividad\", 3, \"src\"], [1, \"ml-4\", \"mr-6\", \"descActivity\"], [1, \"desc\"], [1, \"requisitos\"], [1, \"valoracion\", \"d-flex\"], [1, \"fa-solid\", \"fa-star\"], [1, \"botones-actividad\", \"d-flex\"], [1, \"fa-solid\", \"fa-pen-to-square\", \"fa-2x\", \"editar\", 3, \"routerLink\"], [1, \"fa-solid\", \"fa-trash-can\", \"fa-2x\", \"mx-3\", \"eliminar\", 3, \"click\"], [1, \"infoEmail\"], [1, \"d-flex\", \"activityFooter\"], [1, \"precio\"], [1, \"participantes\", \"d-flex\"]],\n    template: function ActividadesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementStart(4, \"h1\", 4);\n        i0.ɵɵtext(5, \"Panel de Control\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"nav\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"button\", 8);\n        i0.ɵɵelement(10, \"i\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10)(12, \"div\", 11)(13, \"button\", 12);\n        i0.ɵɵtext(14, \"Usuarios\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 11)(16, \"button\", 13);\n        i0.ɵɵtext(17, \"Actividades\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 11)(19, \"button\", 14);\n        i0.ɵɵtext(20, \"Categor\\u00EDas\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 11)(22, \"button\", 15);\n        i0.ɵɵtext(23, \"Incidencias\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"div\", 11)(25, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function ActividadesComponent_Template_button_click_25_listener() {\n          return ctx.logout();\n        });\n        i0.ɵɵtext(26, \"Cerrar Sesi\\u00F3n\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(27, \"div\", 17)(28, \"div\", 18)(29, \"h4\", 19);\n        i0.ɵɵtext(30, \"Actividades\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 20)(32, \"i\", 21);\n        i0.ɵɵlistener(\"click\", function ActividadesComponent_Template_i_click_32_listener() {\n          return ctx.activarBuscador();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"i\", 22);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"div\", 23);\n        i0.ɵɵtemplate(35, ActividadesComponent_form_35_Template, 4, 0, \"form\", 24);\n        i0.ɵɵtemplate(36, ActividadesComponent_div_36_Template, 43, 17, \"div\", 25);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(35);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarBuscador);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listaActividades);\n      }\n    },\n    directives: [i4.RouterLink, i5.NgIf, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.NgForm, i5.NgForOf],\n    styles: [\"\"]\n  });\n  return ActividadesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}